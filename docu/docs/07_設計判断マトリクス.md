# 07: 設計判断マトリクス 📊

## 設計判断のチェックリスト

```
┌──────────────────────────────────────────────────────┐
│            設計判断のチェックリスト                  │
└──────────────────────────────────────────────────────┘

Service分割判断
  ├─ [ ] メソッド数が15を超えるか？ → NO (5-6メソッド)
  ├─ [ ] 異なるトランザクション境界があるか？ → NO
  ├─ [ ] 異なるアクターが使うか？ → NO
  ├─ [ ] 独立して進化する可能性があるか？ → NO
  └─ 結論: 単一Service維持 ✅

Repository作成判断
  ├─ [✓] 独立したテーブルか？ → YES (projects)
  ├─ [ ] 中間テーブル（関連テーブル）か？ → NO
  ├─ [ ] 複雑なクエリが3つ以上あるか？ → NO
  └─ 結論: ProjectsRepository作成 ✅

汎用CRUD作成判断
  ├─ [ ] ORMが存在しない環境か？ → NO (Drizzle使用)
  ├─ [ ] 生SQLを直接記述しているか？ → NO
  ├─ [ ] コード重複が深刻か？ → NO
  └─ 結論: 不要（ORM環境では作らない） ✅

カスタムメソッド作成判断
  ├─ [✓] 3箇所以上で同じクエリを記述するか？ → YES (論理削除チェック)
  ├─ [✓] 10行以上の複雑なクエリか？ → YES (PME番号生成)
  ├─ [✓] ビジネス的に意味のある名前を付けられるか？ → YES
  └─ 結論: カスタムメソッド作成 ✅
      ├─ getNextProjectNumber()
      └─ mapToProjectTable()
```

## 関連ドキュメント

- [06: Repository設計戦略](./06_Repository設計戦略.md)
- [08: レイヤー間依存関係の原則](./08_レイヤー間依存関係の原則.md)

